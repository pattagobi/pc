name: VPN Setup

on:
  push:
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Install PiVPN
        run: |
          curl -L https://install.pivpn.io | bash
          
      - name: Configure PiVPN
        run: |
          # Replace 'your_username' with the desired username for your WireGuard client.
          pivpn add github

      - name: Show WireGuard Configuration
        run: |
          cat /etc/wireguard/wg0.conf
          
      - name: Start PiVPN
        run: |
          pivpn -a

      - name: Display QR Code
        run: |
          pivpn -qr
